# Scheduler

Scheduler - web-приложение для управления списком задач

## Основные фичи:
- Добавление/удаление задач
- Редактирование существующей задачи
- Возможность установить правило повторения задачи
- Поиск по ключевым словам (регистрозависимый поиск)
- Поиск по дате в формате дд.мм.гггг

| Правило повторения                | Описание                                                                 | Пример          |
| ---------------------------------- | ------------------------------------------------------------------------ | --------------- |
| `d <число от 1 до 400>`            | Задача переносится на указанное число дней                             | `d 60`          |
| `y`                                | Задача выполняется ежегодно                                             | `y`             |
| `w <от 1 до 7>`                    | Задача назначается в указанные дни недели                              | `w 1,4,5`  Задача перенесётся на ближайший понедельник, четверг или пятницу      |
| `m <от 1 до 31,-1,-2> [от 1 до 12]` | <div>Задача назначается в указанные дни месяца.<br>Вторая часть опциональна, указывает на определённый месяц.</div> | `m 1,-1 2,8` Задача назначается на 1-е и последнее число февраля и авгуcта|


## Технологический стек:
- **Язык:** Go 1.23
- **База данных:** SQLite
- **Юнит-тесты:** testify
- **Инфраструктура:** Docker


## Запуск проекта

URL для доступа к приложению будет `http://localhost:${APP_PORT}/`

### Локальный запуск:
```bash
 go run ./cmd/main.go 
 ```

### Запуск в контейнере:

```bash
docker build --tag my-app:v1 ./cmd  
```
```bash
docker run -p ${TODO_PORT}:${TODO_PORT} my-app:v1 
```
### Тестирование:

```bash
go test ./...  
```
## Использование API

### 1. Найти следующую дату:

- **Эндпоинт:** `/api/nextdate`
- **Метод:** `GET`
- **URL-параметры:**
`now` - дата ггггммдд `date` - дата ггггммдд `repeat` - правило повторения
- **Пример ответа:**
`20250126`

### 2. Добавить/удалить/найти по id/изменить задачу:

- **Эндпоинт:** `/api/task`
- **Метод:** `POST/DELETE/GET/PUT`
- **Пример тела запроса для POST:**
  ```json
  {
    "comment": "",
    "date": "20250321",
    "repeat": "y",
    "title": "купить подарок на др"
  }
  ```
- **Пример тела ответа для POST:**
  ```json
  {"id": "2"}
  ```

  ### 3. Отметить задачу выполненной:

- **Поиск следующей даты**
- **Эндпоинт:** `/api/task/done`
- **Метод:** `POST`
- **URL-параметры:**
`id: 1` 
- **Пример тела ответа для POST:**
  ```json
  {}
  ```
### 4. Показать список задач:

- **Эндпоинт:** `/api/tasks`
- **Метод:** `POST/DELETE/GET/PUT`
- **URL-параметр:**(опционально)
`search: купить` 

- **Пример тела ответа:**

```json
{
  "tasks": [
    {
     "comment": "",
    "date": "20250321",
    "repeat": "y",
    "title": "купить подарок на др"
    },
    {
    "comment": "",
    "date": "20250325",
    "repeat": "",
    "title": "купить рис"
    }
  ]
}